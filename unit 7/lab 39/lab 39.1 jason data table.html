<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON Data Table</title>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: left;
      }
      th {
        background-color: #4caf50;
        color: white;
      }
      tr:nth-child(even) {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <h2>Loading JSON Data and Displaying it in Table</h2>
    <button onclick="loadJSON()">Load JSON Data</button>
    <div id="tableContainer"></div>

    <script>
      let studentData = [];

      // Load JSON data when page loads
      window.onload = function () {
        fetch("students.json")
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .then((data) => {
            studentData = data;
            console.log("JSON loaded:", studentData.length, "students");
          })
          .catch((error) => {
            console.error("Error loading JSON:", error);
            document.getElementById("tableContainer").innerHTML =
              `<p style="color: red;">Error loading JSON file: ${error.message}</p>`;
          });
      };

      function loadJSON() {
        const container = document.getElementById("tableContainer");

        if (studentData.length === 0) {
          container.innerHTML = `<p style="color: orange;">No data loaded yet or JSON file is empty. Click again in a moment.</p>`;
          return;
        }

        // Create table
        let html = "<h3>Student Data</h3>";
        html += "<table>";
        html +=
          "<tr><th>ID</th><th>Name</th><th>Roll No</th><th>Program</th><th>Grade</th></tr>";

        // Add rows from JSON data
        studentData.forEach((student) => {
          // Add color coding for grades
          let gradeColor = "black";
          if (student.grade === "A+") gradeColor = "darkgreen";
          else if (student.grade === "A") gradeColor = "green";
          else if (student.grade === "B+") gradeColor = "orange";

          html += `<tr>
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td>${student.roll}</td>
                    <td>${student.program}</td>
                    <td style="color: ${gradeColor}; font-weight: bold;">${student.grade}</td>
                </tr>`;
        });

        html += "</table>";

        // Add summary
        html += `<p><strong>Total Students:</strong> ${studentData.length}</p>`;

        container.innerHTML = html;
      }
    </script>
  </body>
</html>
